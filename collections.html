<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pusy Bali â€” Product</title>
  <link rel="stylesheet" href="style.css">
  <script defer src="script.js"></script>
  <script defer src="login.js"></script>
</head>
<body>
<header class="site-header container">
  <div class="header-left"><a href="index.html" class="logo"><img src="assets/logo.png" alt="logo" class="logo-img"></a></div>
  <nav class="main-nav"><ul><li><a href="index.html">Home</a></li><li><a href="collections.html">Shop</a></li><li><a href="contact.html">Contact</a></li></ul></nav>
  <div class="header-right"><div class="search-wrap"><input id="header-search" type="search" placeholder="Search products..."><button id="search-btn" class="btn small">Search</button></div><div class="user-wrap"><button id="open-auth" class="btn small"><i class="fa fa-user"></i></button><span id="user-greeting"></span></div><div class="cart-wrap"><button id="open-cart" class="cart-btn"><i class="fa fa-shopping-cart"></i></button><span id="cart-count" class="cart-count">0</span></div></div>
</header>

<main class="container section">
  <div class="product-detail">
    <div class="product-images">
      <img id="prod-img-1" src="assets/pic6.jpg" alt="Product image 1">
      <img id="prod-img-2" src="assets/pic7.jpg" alt="Product image 2">
    </div>

    <div class="product-info">
      <h2 id="prod-title">Product Title</h2>
      <div id="prod-price" class="price">$0</div>

      <label>Size<select id="prod-size"><option>S</option><option>M</option><option>L</option></select></label>
      <label>Color<select id="prod-color"><option>Black</option><option>Blue</option><option>Red</option></select></label>
      <label>Quantity<input id="prod-qty" type="number" min="1" value="1"></label>

      <div style="display:flex;gap:10px;margin-top:12px">
        <button id="prod-add" class="btn primary">Add to cart</button>
        <a href="cart.html" class="btn">View cart</a>
      </div>
    </div>
  </div>
</main>

<footer class="site-footer">
  <div class="container footer-grid"><div class="col"><h4>Pusy Bali</h4></div><div class="col"><h4>Shop</h4></div><div class="col"><h4>Help</h4></div><div class="col"><h4>Follow</h4><a href="https://www.instagram.com/pusy_bali/"><img src="assets/logo.png" style="width:36px;height:36px;border-radius:50%"></a></div></div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const sel = JSON.parse(localStorage.getItem('puys_selected_product') || 'null');
  if (!sel) return;
  document.getElementById('prod-title').innerText = sel.name || '';
  document.getElementById('prod-price').innerText = '$' + (sel.price || 0);
  document.getElementById('prod-img-1').src = sel.img || 'assets/pic6.jpg';
  document.getElementById('prod-img-2').src = sel.img || 'assets/pic7.jpg';
  document.getElementById('prod-add').addEventListener('click', ()=>{
    const CART_KEY = 'puys_cart_v1';
    let cart = JSON.parse(localStorage.getItem(CART_KEY) || '[]');
    const id = sel.id || sel.name;
    const qty = parseInt(document.getElementById('prod-qty').value) || 1;
    const size = document.getElementById('prod-size').value;
    const color = document.getElementById('prod-color').value;
    const variant = size + '|' + color;
    const existing = cart.find(i => i.id === id && i.variant === variant);
    if (existing) existing.qty = (existing.qty || 0) + qty;
    else cart.push({ id, name: sel.name, price: sel.price, img: sel.img, qty, variant });
    localStorage.setItem(CART_KEY, JSON.stringify(cart));
    alert('Added to cart');
    // call global cart count updater if provided
    if (typeof window.updateCartCount === 'function') window.updateCartCount();
  });
});
</script>

</body>
</html>
