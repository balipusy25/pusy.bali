<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pusy Bali | Cart</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body>

  <!-- TOP BAR -->
  <div class="top-bar">Review your items before checkout.</div>

  <!-- NAVBAR -->
  <header>
    <div class="navbar">
      <img src="assets/logo.png" alt="Pusy Bali Logo" onclick="window.location.href='index.html'">
      <div class="nav-links">
        <a href="index.html">Home</a>
        <a href="collections.html">Shop</a>
        <a href="contact.html">Contact</a>
      </div>
      <div class="nav-icons">
        <i class="fa-solid fa-magnifying-glass" onclick="document.querySelector('.search-form').classList.toggle('active')"></i>
        <i class="fa-solid fa-user" onclick="window.location.href='login.html'"></i>
        <i class="fa-solid fa-cart-shopping"></i>
        <span class="cart-count">0</span>
      </div>
    </div>
    <form class="search-form" style="display:none;">
      <input type="text" placeholder="Search products..." required>
      <button type="submit">Search</button>
    </form>
  </header>

  <!-- CART SECTION -->
  <section class="checkout-container">
    <h2>Your Shopping Cart</h2>
    <div id="cartItemsContainer"></div>
    <h3 id="cartTotal">Total: $0.00</h3>
    <button onclick="proceedToCheckout()">Proceed to Checkout</button>
  </section>

  <!-- FOOTER -->
  <footer>
    <p>Â© 2025 Pusy Bali. All rights reserved.</p>
    <div class="instagram">
      <a href="https://www.instagram.com/pusy_bali/" target="_blank">
        <img src="assets/logo.png" alt="Instagram Logo">
      </a>
    </div>
  </footer>

  <script>
    const cartItemsContainer = document.getElementById('cartItemsContainer');
    const cartTotalEl = document.getElementById('cartTotal');
    let cartItems = JSON.parse(localStorage.getItem('cart')) || [];

    function renderCart() {
      cartItemsContainer.innerHTML = '';
      let total = 0;
      cartItems.forEach((item, index) => {
        total += item.price;
        const itemEl = document.createElement('div');
        itemEl.className = 'summary-item';
        itemEl.innerHTML = `
          <img src="${item.image}" alt="${item.name}">
          <p>${item.name}</p>
          <p>$${item.price.toFixed(2)}</p>
          <input type="number" min="1" value="1" onchange="updateQuantity(${index}, this.value)">
          <button onclick="removeItem(${index})">Remove</button>
        `;
        cartItemsContainer.appendChild(itemEl);
      });
      cartTotalEl.textContent = `Total: $${total.toFixed(2)}`;
    }

    function updateQuantity(index, qty) {
      qty = parseInt(qty);
      if (qty < 1) qty = 1;
      cartItems[index].price = cartItems[index].price / 1 * qty;
      localStorage.setItem('cart', JSON.stringify(cartItems));
      renderCart();
    }

    function removeItem(index) {
      cartItems.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cartItems));
      renderCart();
      updateCartCount();
    }

    function proceedToCheckout() {
      if (cartItems.length === 0) {
        alert('Your cart is empty!');
        return;
      }
      window.location.href = 'checkout.html';
    }

    renderCart();
    updateCartCount();
  </script>
</body>
</html>
